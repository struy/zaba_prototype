<script>
    $(document).ready(function () {
        $('.favorite').click(function (e) {
            e.preventDefault()
            let this_ = $(this);
            let favUrl = this_.data('href');
            let fa = "far";
            $.ajax(
                {
                    url: favUrl,
                    method: "GET",
                    data: {},
                    success: data => {
                        let counter = $('.counter-favorites b');
                        let current = +counter.text();

                        if (data.updated) {
                            if (data.favourite) {
                                fa = "fas";
                                current += 1;
                            } else {
                                current -= 1;
                            }
                            this_.html('<i class="' + fa + ' fa-heart fa-heart"></i>');
                            counter.text(current);

                        }

                    }
                }
            )


        })
    });
</script>

